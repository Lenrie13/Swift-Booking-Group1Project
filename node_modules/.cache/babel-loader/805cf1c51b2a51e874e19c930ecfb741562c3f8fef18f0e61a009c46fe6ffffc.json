{"ast":null,"code":"import{useEffect,useState}from\"react\";import{useLocation}from\"react-router-dom\";import\"./BookingManagement.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const BookingManagement=props=>{var _location$state;const{signedInUser}=props;const[signedInUserBookings,setSignedInUserBookings]=useState([]);const location=useLocation();const{bookingData}=(_location$state=location.state)!==null&&_location$state!==void 0?_location$state:{};useEffect(()=>{// Assuming there's a specific endpoint to fetch bookings related to the signed-in user\nfetch(`http://localhost:3000/payments?userId=${signedInUser.id}`).then(response=>response.json()).then(data=>setSignedInUserBookings(data)).catch(error=>console.error('Error fetching bookings:',error));},[signedInUser]);const cancelBooking=booking=>{fetch(`http://localhost:3000/payments/${booking.id}`,{method:'DELETE'}).then(()=>{setSignedInUserBookings(previousBookings=>previousBookings.filter(bookingItem=>bookingItem.id!==booking.id));}).catch(error=>{console.log(\"Error deleting booking\",error);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"user-dashboard\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"bookings-header\",children:\"User Dashboard: Bookings\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bookings-list\",children:signedInUserBookings.map(booking=>/*#__PURE__*/_jsxs(\"div\",{className:\"booking-item\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Hotel: \",booking.hotelName]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Room: \",booking.roomType]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Payment Method: \",booking.paymentMethod]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Amount: $ \",booking.amount]}),/*#__PURE__*/_jsx(\"button\",{className:\"cancel-button\",onClick:()=>cancelBooking(booking),children:\"Cancel Booking\"})]},booking.id))})]});};export default BookingManagement;","map":{"version":3,"names":["useEffect","useState","useLocation","jsx","_jsx","jsxs","_jsxs","BookingManagement","props","_location$state","signedInUser","signedInUserBookings","setSignedInUserBookings","location","bookingData","state","fetch","id","then","response","json","data","catch","error","console","cancelBooking","booking","method","previousBookings","filter","bookingItem","log","className","children","map","hotelName","roomType","paymentMethod","amount","onClick"],"sources":["/Users/lenrieogutu/Projects/moringaSchool/phaseFourContent/Swift-Booking-Group1Project/src/Components/BookingManagement.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useLocation } from \"react-router-dom\";\nimport \"./BookingManagement.css\";\n\nexport const BookingManagement = (props) => {\n    const { signedInUser } = props;\n    const [signedInUserBookings, setSignedInUserBookings] = useState([]);\n    const location = useLocation();\n    const { bookingData } = location.state ?? {};\n\n    useEffect(() => {\n        // Assuming there's a specific endpoint to fetch bookings related to the signed-in user\n        fetch(`http://localhost:3000/payments?userId=${signedInUser.id}`)\n            .then(response => response.json())\n            .then(data => setSignedInUserBookings(data))\n            .catch(error => console.error('Error fetching bookings:', error));\n    }, [signedInUser]);\n\n    const cancelBooking = (booking) => {\n        fetch(`http://localhost:3000/payments/${booking.id}`, {\n            method: 'DELETE'\n        })\n        .then(() => {\n            setSignedInUserBookings(previousBookings => \n                previousBookings.filter(bookingItem => bookingItem.id !== booking.id)\n            );\n        })\n        .catch(error => {\n            console.log(\"Error deleting booking\", error);\n        });\n    };\n\n    return (\n        <div className=\"user-dashboard\">\n            <h1 className=\"bookings-header\">User Dashboard: Bookings</h1>\n            <div className=\"bookings-list\">\n                {signedInUserBookings.map(booking => (\n                    <div key={booking.id} className=\"booking-item\">\n                        <div>Hotel: {booking.hotelName}</div>\n                        <div>Room: {booking.roomType}</div>\n                        <div>Payment Method: {booking.paymentMethod}</div>\n                        <div>Amount: $ {booking.amount}</div>\n                        <button className=\"cancel-button\" onClick={() => cancelBooking(booking)}>Cancel Booking</button>\n                    </div>\n                ))}\n            </div>\n        </div>\n    );\n};\n\nexport default BookingManagement;\n"],"mappings":"AAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,yBAAyB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEjC,MAAO,MAAM,CAAAC,iBAAiB,CAAIC,KAAK,EAAK,KAAAC,eAAA,CACxC,KAAM,CAAEC,YAAa,CAAC,CAAGF,KAAK,CAC9B,KAAM,CAACG,oBAAoB,CAAEC,uBAAuB,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CACpE,KAAM,CAAAY,QAAQ,CAAGX,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAEY,WAAY,CAAC,EAAAL,eAAA,CAAGI,QAAQ,CAACE,KAAK,UAAAN,eAAA,UAAAA,eAAA,CAAI,CAAC,CAAC,CAE5CT,SAAS,CAAC,IAAM,CACZ;AACAgB,KAAK,CAAC,yCAAyCN,YAAY,CAACO,EAAE,EAAE,CAAC,CAC5DC,IAAI,CAACC,QAAQ,EAAIA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CACjCF,IAAI,CAACG,IAAI,EAAIT,uBAAuB,CAACS,IAAI,CAAC,CAAC,CAC3CC,KAAK,CAACC,KAAK,EAAIC,OAAO,CAACD,KAAK,CAAC,0BAA0B,CAAEA,KAAK,CAAC,CAAC,CACzE,CAAC,CAAE,CAACb,YAAY,CAAC,CAAC,CAElB,KAAM,CAAAe,aAAa,CAAIC,OAAO,EAAK,CAC/BV,KAAK,CAAC,kCAAkCU,OAAO,CAACT,EAAE,EAAE,CAAE,CAClDU,MAAM,CAAE,QACZ,CAAC,CAAC,CACDT,IAAI,CAAC,IAAM,CACRN,uBAAuB,CAACgB,gBAAgB,EACpCA,gBAAgB,CAACC,MAAM,CAACC,WAAW,EAAIA,WAAW,CAACb,EAAE,GAAKS,OAAO,CAACT,EAAE,CACxE,CAAC,CACL,CAAC,CAAC,CACDK,KAAK,CAACC,KAAK,EAAI,CACZC,OAAO,CAACO,GAAG,CAAC,wBAAwB,CAAER,KAAK,CAAC,CAChD,CAAC,CAAC,CACN,CAAC,CAED,mBACIjB,KAAA,QAAK0B,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC3B7B,IAAA,OAAI4B,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAC,0BAAwB,CAAI,CAAC,cAC7D7B,IAAA,QAAK4B,SAAS,CAAC,eAAe,CAAAC,QAAA,CACzBtB,oBAAoB,CAACuB,GAAG,CAACR,OAAO,eAC7BpB,KAAA,QAAsB0B,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC1C3B,KAAA,QAAA2B,QAAA,EAAK,SAAO,CAACP,OAAO,CAACS,SAAS,EAAM,CAAC,cACrC7B,KAAA,QAAA2B,QAAA,EAAK,QAAM,CAACP,OAAO,CAACU,QAAQ,EAAM,CAAC,cACnC9B,KAAA,QAAA2B,QAAA,EAAK,kBAAgB,CAACP,OAAO,CAACW,aAAa,EAAM,CAAC,cAClD/B,KAAA,QAAA2B,QAAA,EAAK,YAAU,CAACP,OAAO,CAACY,MAAM,EAAM,CAAC,cACrClC,IAAA,WAAQ4B,SAAS,CAAC,eAAe,CAACO,OAAO,CAAEA,CAAA,GAAMd,aAAa,CAACC,OAAO,CAAE,CAAAO,QAAA,CAAC,gBAAc,CAAQ,CAAC,GAL1FP,OAAO,CAACT,EAMb,CACR,CAAC,CACD,CAAC,EACL,CAAC,CAEd,CAAC,CAED,cAAe,CAAAV,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}