{"ast":null,"code":"import React,{useState}from'react';import\"./PaymentForm.css\";import{useLocation,useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function PaymentForm(_ref){var _location$state;let{bookingData,signedInuser}=_ref;const navigate=useNavigate();const[paymentMethod,setPaymentMethod]=useState('mpesa');const[mpesaNumber,setMpesaNumber]=useState('');const[cardNumber,setCardNumber]=useState('');const[cardHolderName,setCardHolderName]=useState('');const[amount]=useState(bookingData.numberOfNights*100);// Example amount calculation\nconst location=useLocation();const{totalCost,...restOfPaymentData}=(_location$state=location.state)!==null&&_location$state!==void 0?_location$state:{};const handlePayment=async()=>{// Basic validation\nif(paymentMethod==='mpesa'&&!mpesaNumber){alert('Please enter your Mpesa number.');return;}if(paymentMethod==='card'&&(!cardNumber||!cardHolderName)){alert('Please enter your card details.');return;}// Simulate a payment request\ntry{// Payment API request simulation\nconst paymentResponse=await fetch('http://localhost:3000/payments',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({amount:totalCost,paymentMethod,mpesaNumber,cardNumber,cardHolderName,user:signedInuser,...restOfPaymentData})});if(paymentResponse.ok){navigate('/manage-booking',{state:{bookingData}});}else{alert('Payment failed. Please try again.');}}catch(error){console.error('Error processing payment:',error);alert('Payment error. Please try again.');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"payment-form\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Please Make Your Payment\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"payment-details\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Amount Payable: $\",totalCost]}),/*#__PURE__*/_jsxs(\"div\",{className:\"payment-methods\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"paymentMethod\",value:\"mpesa\",checked:paymentMethod==='mpesa',onChange:()=>setPaymentMethod('mpesa')}),\"Mpesa\"]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"paymentMethod\",value:\"card\",checked:paymentMethod==='card',onChange:()=>setPaymentMethod('card')}),\"Bank Card\"]})]}),paymentMethod==='card'&&/*#__PURE__*/_jsxs(\"div\",{className:\"card-details\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Card Number\",value:cardNumber,onChange:e=>setCardNumber(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Card Holder Name\",value:cardHolderName,onChange:e=>setCardHolderName(e.target.value)})]}),paymentMethod==='mpesa'&&/*#__PURE__*/_jsx(\"div\",{className:\"mpesa-details\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Mpesa Number\",value:mpesaNumber,onChange:e=>setMpesaNumber(e.target.value)})}),/*#__PURE__*/_jsx(\"button\",{id:\"pay-now-button\",onClick:handlePayment,children:\"Pay Now\"})]})]});}export default PaymentForm;","map":{"version":3,"names":["React","useState","useLocation","useNavigate","jsx","_jsx","jsxs","_jsxs","PaymentForm","_ref","_location$state","bookingData","signedInuser","navigate","paymentMethod","setPaymentMethod","mpesaNumber","setMpesaNumber","cardNumber","setCardNumber","cardHolderName","setCardHolderName","amount","numberOfNights","location","totalCost","restOfPaymentData","state","handlePayment","alert","paymentResponse","fetch","method","headers","body","JSON","stringify","user","ok","error","console","className","children","type","name","value","checked","onChange","placeholder","e","target","id","onClick"],"sources":["/Users/lenrieogutu/Projects/moringaSchool/phaseFourContent/Swift-Booking-Group1Project/src/Components/PaymentForm.js"],"sourcesContent":["import React, { useState } from 'react';\nimport \"./PaymentForm.css\"\nimport { useLocation, useNavigate } from 'react-router-dom';\n\nfunction PaymentForm({ bookingData,signedInuser }) {\n  const navigate = useNavigate();\n  const [paymentMethod, setPaymentMethod] = useState('mpesa');\n  const [mpesaNumber, setMpesaNumber] = useState('');\n  const [cardNumber, setCardNumber] = useState('');\n  const [cardHolderName, setCardHolderName] = useState('');\n  const [amount] = useState(bookingData.numberOfNights * 100); // Example amount calculation\n  const location = useLocation();\n  const {totalCost, ...restOfPaymentData} = location.state??{}\n\n  const handlePayment = async () => {\n    // Basic validation\n    if (paymentMethod === 'mpesa' && !mpesaNumber) {\n      alert('Please enter your Mpesa number.');\n      return;\n    }\n    if (paymentMethod === 'card' && (!cardNumber || !cardHolderName)) {\n      alert('Please enter your card details.');\n      return;\n    }\n\n    // Simulate a payment request\n    try {\n      // Payment API request simulation\n      const paymentResponse = await fetch('http://localhost:3000/payments', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          amount:totalCost,\n          paymentMethod,\n          mpesaNumber,\n          cardNumber,\n          cardHolderName,\n          user:signedInuser,\n          ...restOfPaymentData\n        }),\n      });\n\n      if (paymentResponse.ok) {\n        navigate('/manage-booking', { state: { bookingData } });\n      } else {\n        alert('Payment failed. Please try again.');\n      }\n    } catch (error) {\n      console.error('Error processing payment:', error);\n      alert('Payment error. Please try again.');\n    }\n  };\n\n  return (\n    <div className=\"payment-form\">\n      <h2>Please Make Your Payment</h2>\n      <div className=\"payment-details\">\n        <p>Amount Payable: ${totalCost}</p>\n        <div className=\"payment-methods\">\n          <label>\n            <input\n              type=\"radio\"\n              name=\"paymentMethod\"\n              value=\"mpesa\"\n              checked={paymentMethod === 'mpesa'}\n              onChange={() => setPaymentMethod('mpesa')}\n            />\n            Mpesa\n          </label>\n          <label>\n            <input\n              type=\"radio\"\n              name=\"paymentMethod\"\n              value=\"card\"\n              checked={paymentMethod === 'card'}\n              onChange={() => setPaymentMethod('card')}\n            />\n            Bank Card\n          </label>\n        </div>\n        {paymentMethod === 'card' && (\n          <div className=\"card-details\">\n            <input\n              type=\"text\"\n              placeholder=\"Card Number\"\n              value={cardNumber}\n              onChange={(e) => setCardNumber(e.target.value)}\n            />\n            <input\n              type=\"text\"\n              placeholder=\"Card Holder Name\"\n              value={cardHolderName}\n              onChange={(e) => setCardHolderName(e.target.value)}\n            />\n          </div>\n        )}\n        {paymentMethod === 'mpesa' && (\n          <div className=\"mpesa-details\">\n            <input\n              type=\"text\"\n              placeholder=\"Mpesa Number\"\n              value={mpesaNumber}\n              onChange={(e) => setMpesaNumber(e.target.value)}\n            />\n          </div>\n        )}\n        <button id=\"pay-now-button\" onClick={handlePayment}>Pay Now</button>\n      </div>\n    </div>\n  );\n}\n\nexport default PaymentForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}